/* Theme tokens: tweak colors in :root for wedding palette adjustments. */
:root{
  --bg:#f1f4fa;
  --surface:#ffffff;
  --surface-2:#f6f7fb;
  --text:#1f2433;
  --muted:#556070;
  --border:rgba(24,36,56,.12);
  --accent:#5b7fff;
  --accent-2:#ff94b3;
  --accent-3:#42c8b3;
  --space-1:4px;
  --space-2:8px;
  --space-3:12px;
  --space-4:18px;
  --space-5:24px;
  --r-sm:12px;
  --r-md:16px;
  --r-lg:22px;
  --r-xl:28px;
  --shadow-1:0 6px 16px rgba(15,23,42,.08);
  --shadow-2:0 14px 30px rgba(15,23,42,.12);
  --shadow-3:0 24px 50px rgba(15,23,42,.16);
  --ease:cubic-bezier(.22,1,.36,1);
  --dur-1:120ms;
  --dur-2:220ms;
  --dur-3:420ms;
  --ring:0 0 0 3px rgba(91,127,255,.28);
}

@media (prefers-color-scheme: dark){
  :root{
    --bg:#0f1116;
    --surface:#161a22;
    --surface-2:#1f2330;
    --text:#eef1f7;
    --muted:#a4afc2;
    --border:rgba(148,163,184,.2);
    --accent:#7aa2ff;
    --accent-2:#ff9fbb;
    --accent-3:#58d8c2;
    --shadow-1:0 6px 16px rgba(5,8,14,.45);
    --shadow-2:0 14px 30px rgba(5,8,14,.5);
    --shadow-3:0 24px 50px rgba(5,8,14,.6);
    --ring:0 0 0 3px rgba(122,162,255,.35);
  }
}

*{ box-sizing:border-box; }

body{
  margin:0;
  font-family:"Heebo", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-size:16px;
  line-height:1.6;
  background:
    radial-gradient(900px 420px at 100% -10%, rgba(91,127,255,.14), transparent 60%),
    radial-gradient(800px 420px at 0% 10%, rgba(255,148,179,.16), transparent 55%),
    linear-gradient(180deg, rgba(246,248,255,.9), var(--bg));
  color:var(--text);
  min-height:100vh;
  padding: env(safe-area-inset-top) 0 env(safe-area-inset-bottom);
  overflow-x:hidden;
}

@media (prefers-color-scheme: dark){
  body{
    background:
      radial-gradient(900px 420px at 100% -10%, rgba(122,162,255,.2), transparent 60%),
      radial-gradient(800px 420px at 0% 10%, rgba(255,159,187,.14), transparent 55%),
      linear-gradient(180deg, rgba(12,14,20,.9), var(--bg));
  }
}

.app h1,
.app h2{
  letter-spacing:-0.02em;
  line-height:1.25;
}

.app p{
  letter-spacing:.01em;
}

.app{
  max-width: 760px;
  margin: 0 auto;
  padding: var(--space-4) var(--space-4) calc(160px + env(safe-area-inset-bottom));
  display:flex;
  flex-direction:column;
  gap:var(--space-3);
}

.card{
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--r-xl);
  box-shadow: var(--shadow-2);
}

.header{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:var(--space-3);
  margin-top: 0;
  padding: var(--space-3) var(--space-4);
  border-radius: var(--r-lg);
  background: color-mix(in srgb, var(--surface) 90%, transparent);
  border:1px solid var(--border);
  box-shadow: var(--shadow-1);
  backdrop-filter: blur(6px);
  flex-wrap:wrap;
}

.brand{
  display:flex;
  flex-direction:column;
  gap:var(--space-1);
}

.brand h1{
  margin:0;
  font-size: clamp(22px, 4.5vw, 30px);
  font-weight:900;
}

.brand p{
  margin:0;
  color:var(--muted);
  font-size:14px;
}

.badge{
  display:inline-flex;
  align-items:center;
  gap:var(--space-2);
  padding: 6px 12px;
  border:1px solid color-mix(in srgb, var(--accent) 40%, transparent);
  border-radius: 999px;
  background: color-mix(in srgb, var(--accent) 12%, transparent);
  font-size: 12px;
  color: var(--text);
  font-weight:700;
}

.badge-dot{
  width:8px;
  height:8px;
  border-radius:999px;
  background: var(--accent-3);
  box-shadow: 0 0 0 4px color-mix(in srgb, var(--accent-3) 25%, transparent);
}

.screen{
  position:relative;
  animation: fadeIn var(--dur-3) var(--ease);
}

.screen--forward{ animation: slideInForward var(--dur-3) var(--ease); }
.screen--back{ animation: slideInBack var(--dur-2) var(--ease); }
.screen--static{ animation: none; }

@keyframes fadeIn{
  from{ opacity:0; transform: translateY(12px) scale(.98); }
  to{ opacity:1; transform: translateY(0) scale(1); }
}

@keyframes slideInForward{
  from{ opacity:0; transform: translateX(-18px) scale(.98); }
  to{ opacity:1; transform: translateX(0) scale(1); }
}

@keyframes slideInBack{
  from{ opacity:0; transform: translateX(18px) scale(.98); }
  to{ opacity:1; transform: translateX(0) scale(1); }
}

.breadcrumbs{
  margin: var(--space-2) 0 var(--space-2);
  padding: var(--space-3) var(--space-4);
  border-radius: var(--r-lg);
  background: var(--surface);
  border: 1px solid var(--border);
  box-shadow: var(--shadow-1);
}

.stepper-track{
  position:relative;
  height:4px;
  border-radius:999px;
  background: color-mix(in srgb, var(--border) 65%, transparent);
  overflow:hidden;
  margin-bottom: var(--space-3);
}

.stepper-track-fill{
  position:absolute;
  inset:0;
  width:0;
  border-radius:999px;
  background: linear-gradient(90deg, color-mix(in srgb, var(--accent) 90%, #fff 5%), color-mix(in srgb, var(--accent-3) 85%, #fff 5%));
  transition: width var(--dur-2) var(--ease);
}

.stepper{
  list-style:none;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:var(--space-2);
  padding:0;
  margin:0;
}

.stepper-item{
  flex:1;
  display:flex;
  justify-content:center;
}

.stepper-dot{
  width:44px;
  height:44px;
  border-radius:999px;
  border:1px solid var(--border);
  background: var(--surface-2);
  color: var(--muted);
  font-weight:800;
  cursor:pointer;
  display:grid;
  place-items:center;
  box-shadow: var(--shadow-1);
  transition: transform var(--dur-1) var(--ease), box-shadow var(--dur-2) var(--ease), border-color var(--dur-1) ease, background var(--dur-1) ease, color var(--dur-1) ease;
}

.stepper-dot:disabled{
  cursor:not-allowed;
  opacity:.5;
}

.stepper-dot:focus-visible{
  outline:none;
  box-shadow: var(--ring);
}

.stepper-dot.current{
  background: color-mix(in srgb, var(--accent) 15%, var(--surface));
  border-color: color-mix(in srgb, var(--accent) 50%, var(--border));
  color: var(--text);
  transform: translateY(-1px);
  box-shadow: var(--shadow-2);
}

.stepper-dot.completed{
  background: color-mix(in srgb, var(--accent-3) 18%, var(--surface));
  border-color: color-mix(in srgb, var(--accent-3) 50%, var(--border));
  color: var(--text);
}

.stepper-number{
  font-size: 16px;
}

.sr-only{
  position:absolute;
  width:1px;
  height:1px;
  padding:0;
  margin:-1px;
  overflow:hidden;
  clip: rect(0, 0, 0, 0);
  white-space:nowrap;
  border:0;
}

.summary-chips{
  display:flex;
  flex-wrap:wrap;
  gap:var(--space-2);
  margin-top:var(--space-2);
}

.summary-chip{
  padding: 6px 10px;
  border-radius: 999px;
  background: color-mix(in srgb, var(--accent) 12%, transparent);
  border:1px solid color-mix(in srgb, var(--accent) 35%, transparent);
  font-size: 12px;
  font-weight:700;
  color: var(--text);
}

.section{
  padding: var(--space-4);
  margin-top: var(--space-3);
}

.section-title{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:var(--space-2);
  margin-bottom: var(--space-3);
}

.step-subtitle{
  margin: 0 0 var(--space-2);
  color: var(--muted);
  font-size: 13px;
  font-weight:600;
}

.section-title h2{
  margin:0;
  font-size: 19px;
  font-weight:800;
}

.section-title [data-step-title]:focus-visible{
  outline:none;
  box-shadow: var(--ring);
  border-radius: var(--r-sm);
  padding: 2px 6px;
  margin: -2px -6px;
}

.section-title small{
  color: var(--muted);
  font-weight:600;
}

.grid{
  display:grid;
  grid-template-columns: 1fr;
  gap:var(--space-3);
}

.reel{
  position:relative;
  padding: var(--space-2) 0 var(--space-2);
  max-width: min(640px, 100%);
  margin-inline: auto;
}

.reel-spectrum{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: var(--space-2);
  padding: 0 var(--space-1);
  margin-bottom: var(--space-2);
  font-size: 12px;
  font-weight: 700;
  color: var(--muted);
}

.spectrum-track{
  position:relative;
  flex:1;
  height: 8px;
  border-radius: 999px;
  background: color-mix(in srgb, var(--border) 70%, transparent);
  overflow:hidden;
}

.spectrum-fill{
  position:absolute;
  inset:0;
  transform-origin: left center;
  transform: scaleX(var(--progress, 0));
  background: linear-gradient(90deg, color-mix(in srgb, var(--accent) 80%, #fff 5%), color-mix(in srgb, var(--accent-2) 70%, #fff 5%), color-mix(in srgb, var(--accent-3) 70%, #fff 5%));
  transition: transform var(--dur-2) var(--ease);
}

.spectrum-ticks{
  position:absolute;
  inset:0;
  background: repeating-linear-gradient(90deg, transparent, transparent 8%, color-mix(in srgb, var(--surface) 75%, transparent) 8%, color-mix(in srgb, var(--surface) 75%, transparent) 12%);
  opacity:0.5;
}

.spectrum-label{
  min-width: 50px;
  text-align:center;
}

.reel[data-orientation="vertical"] .reel-spectrum{
  flex-direction:column;
  align-items:center;
  margin-bottom: var(--space-3);
}

.reel[data-orientation="vertical"] .spectrum-track{
  width: 8px;
  height: 150px;
  align-self:center;
}

.reel[data-orientation="vertical"] .spectrum-fill{
  transform-origin: bottom center;
  transform: scaleY(var(--progress, 0));
  background: linear-gradient(0deg, color-mix(in srgb, var(--accent) 80%, #fff 5%), color-mix(in srgb, var(--accent-2) 70%, #fff 5%), color-mix(in srgb, var(--accent-3) 70%, #fff 5%));
}

.reel[data-orientation="vertical"] .spectrum-ticks{
  background: repeating-linear-gradient(0deg, transparent, transparent 8%, color-mix(in srgb, var(--surface) 75%, transparent) 8%, color-mix(in srgb, var(--surface) 75%, transparent) 12%);
}

.reel-spotlight{
  position:absolute;
  inset-inline: 18%;
  top: 8px;
  bottom: 42px;
  border-radius: var(--r-lg);
  background: radial-gradient(circle at center, color-mix(in srgb, var(--surface) 90%, transparent), color-mix(in srgb, var(--surface) 10%, transparent) 60%, transparent 70%);
  box-shadow: 0 0 0 1px color-mix(in srgb, var(--border) 35%, transparent), 0 0 16px color-mix(in srgb, var(--accent) 25%, transparent);
  pointer-events:none;
}

.reel[data-orientation="vertical"] .reel-spotlight{
  inset-inline: 20%;
  top: 54px;
  bottom: 18px;
}

.reel-viewport{
  position:relative;
  overflow:hidden;
  padding: var(--space-3) 0 var(--space-4);
  touch-action: pan-y;
  cursor: grab;
}

.reel-nav{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding-inline: 4%;
  pointer-events:none;
}

.reel-nav-button{
  position:relative;
  width:32px;
  height:32px;
  border-radius:50%;
  background: var(--surface);
  color: var(--text);
  box-shadow: var(--shadow-1);
  border:1px solid var(--border);
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  z-index:4;
  pointer-events:auto;
}

.reel-nav-icon{
  width:18px;
  height:18px;
}

.reel-nav-next .reel-nav-icon{
  transform: scaleX(-1);
}

:root[dir="rtl"] .reel-nav-next .reel-nav-icon,
html[dir="rtl"] .reel-nav-next .reel-nav-icon{
  transform: none;
}

:root[dir="rtl"] .reel-nav-prev .reel-nav-icon,
html[dir="rtl"] .reel-nav-prev .reel-nav-icon{
  transform: scaleX(-1);
}

.reel-nav-button[disabled]{
  opacity:0.4;
  pointer-events:none;
}

.reel-nav-button:focus-visible{
  outline:none;
  box-shadow: var(--ring);
}

.reel[data-orientation="vertical"] .reel-viewport{
  padding: var(--space-2) var(--space-2);
  height: clamp(260px, 42vh, 340px);
  touch-action: pan-x;
}

.reel[data-orientation="vertical"] .reel-nav{
  flex-direction:column;
  padding-inline: 0;
  padding-block: 4%;
}

.reel-viewport.is-dragging{
  cursor: grabbing;
}

.reel-track{
  display:flex;
  align-items:center;
  gap:var(--space-3);
  will-change: transform;
}

.reel[data-orientation="vertical"] .reel-track{
  flex-direction:column;
  align-items:center;
}

.reel-card{
  --option-hue: 220;
  --scale: 1;
  --desaturate: 0;
  flex: 0 0 auto;
  width: clamp(190px, 70%, 280px);
  border-radius: var(--r-lg);
  padding: var(--space-4) var(--space-3);
  text-align:center;
  font-weight:800;
  font-size: 15px;
  color: var(--text) !important;
  border:1px solid var(--border);
  background: linear-gradient(150deg, color-mix(in srgb, var(--surface) 92%, transparent), color-mix(in srgb, var(--accent) 6%, var(--surface)));
  box-shadow: var(--shadow-2);
  position:relative;
  transform: translateZ(0) scale(var(--scale));
  filter: saturate(calc(1 - var(--desaturate)));
  transition: transform var(--dur-2) var(--ease), box-shadow var(--dur-2) var(--ease), border-color var(--dur-2) ease, filter var(--dur-2) ease;
  display:flex;
  align-items:center;
  justify-content:center;
}

.reel[data-orientation="vertical"] .reel-card{
  width: min(80%, 260px);
}

.reel-card:focus-visible{
  outline:none;
  box-shadow: var(--ring);
}

.reel-card::after{
  content:"";
  position:absolute;
  inset:-20%;
  background: radial-gradient(circle, color-mix(in srgb, var(--surface) 80%, transparent), rgba(255,255,255,0) 60%);
  opacity:0.04;
  pointer-events:none;
  z-index:1;
}

.reel-card.spark::after{
  animation: reelSpark var(--dur-2) var(--ease);
}

.reel-card-glow{
  position:absolute;
  inset:0;
  background: radial-gradient(circle at top, color-mix(in srgb, var(--accent) 20%, transparent), transparent 60%);
  opacity:.35;
  pointer-events:none;
  z-index:0;
}

.reel[data-tone="friendship"] .reel-card-glow{
  background: radial-gradient(circle at top, color-mix(in srgb, #7b7bff 35%, transparent), transparent 65%);
}

.reel[data-tone="celebration"] .reel-card-glow{
  background: radial-gradient(circle at top, color-mix(in srgb, #ff9b6a 35%, transparent), transparent 65%);
}

.reel[data-tone="venue"] .reel-card-glow{
  background: radial-gradient(circle at top, color-mix(in srgb, #42c8b3 35%, transparent), transparent 65%);
}

.reel[data-tone="crew"] .reel-card-glow{
  background: radial-gradient(circle at top, color-mix(in srgb, #f6c177 40%, transparent), transparent 65%);
}

.reel-card-label{
  position:relative;
  z-index:3;
  display:block;
  width:100%;
  text-align:center;
  direction: rtl;
  color: var(--text) !important;
}

.reel-card-check{
  position:absolute;
  top:12px;
  inset-inline-start:12px;
  width:24px;
  height:24px;
  border-radius:999px;
  display:grid;
  place-items:center;
  background: var(--surface);
  border:2px solid color-mix(in srgb, var(--accent) 65%, transparent);
  font-size: 12px;
  color: var(--text);
  box-shadow: var(--shadow-1);
  opacity:0;
  transform: scale(.6);
  transition: opacity var(--dur-1) ease, transform var(--dur-1) var(--ease);
  z-index:3;
}

.reel-card.is-selected{
  border-color: color-mix(in srgb, var(--accent) 70%, var(--border));
  box-shadow: var(--shadow-2), 0 0 0 2px color-mix(in srgb, var(--accent) 20%, transparent) inset;
  transform: translateZ(0) scale(1.03);
}

.reel-card.is-selected .reel-card-check{
  opacity:1;
  transform: scale(1);
}

.reel-feedback{
  text-align:center;
  font-weight:600;
  color: var(--muted);
  font-size: 13px;
  min-height: 20px;
}

.reel-dots{
  margin-top: var(--space-2);
  display:flex;
  justify-content:center;
  gap:6px;
}

.reel[data-orientation="vertical"] .reel-dots{
  flex-direction:column;
  align-items:center;
  margin-top: var(--space-3);
}

.reel-dot{
  width:7px;
  height:7px;
  border-radius:999px;
  background: color-mix(in srgb, var(--border) 70%, transparent);
  transition: transform var(--dur-1) var(--ease), background var(--dur-1) ease;
}

.reel-dot.is-active{
  background: var(--accent);
  transform: scale(1.25);
}

.reel-actions{
  display:flex;
  justify-content:center;
  margin-top: var(--space-2);
}

.reel-shuffle{
  font-size: 13px;
}

@keyframes reelSpark{
  0%{ opacity:0; transform: scale(.8); }
  60%{ opacity:.35; }
  100%{ opacity:0; transform: scale(1.15); }
}

.option{
  --option-hue: 220;
  border:1px solid var(--border);
  background: var(--surface);
  border-radius: var(--r-lg);
  padding: var(--space-4) var(--space-3);
  text-align:center;
  font-weight:800;
  font-size: 15px;
  color: var(--text);
  cursor:pointer;
  min-height:70px;
  display:flex;
  align-items:center;
  justify-content:center;
  line-height:1.3;
  position:relative;
  overflow:hidden;
  transition: transform var(--dur-1) var(--ease), box-shadow var(--dur-2) var(--ease), border-color var(--dur-1) ease, background var(--dur-1) ease, color var(--dur-1) ease;
}

.option::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius: inherit;
  background: radial-gradient(circle at top, color-mix(in srgb, var(--accent) 18%, transparent), transparent 60%);
  opacity:.7;
  pointer-events:none;
}

.option:focus-visible{
  outline:none;
  box-shadow: var(--ring);
}

.option.selected{
  border-color: color-mix(in srgb, var(--accent) 70%, var(--border));
  background: color-mix(in srgb, var(--accent) 14%, var(--surface));
  box-shadow: var(--shadow-2), 0 0 0 2px color-mix(in srgb, var(--accent) 20%, transparent) inset;
  color: var(--text);
  transform: translateY(-3px) scale(1.01);
  animation: selectPulse var(--dur-2) var(--ease);
}

.option.selected .option-check{
  opacity:1;
  transform: scale(1);
}

.option-sheen{
  position:absolute;
  inset:0;
  background: linear-gradient(120deg, rgba(255,255,255,.0) 0%, rgba(255,255,255,.5) 50%, rgba(255,255,255,.0) 100%);
  transform: translateX(-120%);
  pointer-events:none;
  z-index:1;
}

.option-burst{
  position:absolute;
  inset:0;
  background: radial-gradient(circle at center, rgba(255,255,255,.4), rgba(255,255,255,0) 55%);
  opacity:0;
  pointer-events:none;
  z-index:1;
}

.option-label{
  position:relative;
  z-index:2;
}

.option-check{
  position:absolute;
  top:10px;
  inset-inline-start:12px;
  width:26px;
  height:26px;
  border-radius:999px;
  display:grid;
  place-items:center;
  background: var(--surface);
  border:2px solid color-mix(in srgb, var(--accent) 65%, transparent);
  font-size: 12px;
  color: var(--text);
  box-shadow: var(--shadow-1);
  opacity:0;
  transform: scale(.6);
  transition: opacity var(--dur-1) ease, transform var(--dur-1) var(--ease);
  z-index:3;
}

.option.selected .option-sheen{
  animation: optionSheen var(--dur-3) var(--ease);
}

.option.selected .option-burst{
  animation: optionBurst var(--dur-2) var(--ease);
}

@media (prefers-reduced-motion: reduce){
  .reel-card,
  .reel-dot,
  .reel-card::after{
    transition: none !important;
    animation: none !important;
  }
}

@media (max-width: 480px){
  .reel-nav{
    padding-inline: 3%;
  }

  .reel-nav-button{
    width:28px;
    height:28px;
  }

  .reel-nav-icon{
    width:16px;
    height:16px;
  }
}

@media (min-width: 768px){
  .reel-nav{
    padding-inline: 5%;
  }

  .reel-nav-button{
    width:36px;
    height:36px;
  }

  .reel-nav-icon{
    width:20px;
    height:20px;
  }
}

@keyframes selectPulse{
  0%{ transform: scale(.98); }
  60%{ transform: scale(1.02); }
  100%{ transform: scale(1); }
}

@keyframes optionSheen{
  0%{ transform: translateX(-120%); }
  100%{ transform: translateX(120%); }
}

@keyframes optionBurst{
  0%{ opacity:0; transform: scale(.8); }
  60%{ opacity:.8; }
  100%{ opacity:0; transform: scale(1.2); }
}

@media (hover: hover){
  .option:hover{
    transform: translateY(-1px);
    box-shadow: var(--shadow-2);
  }
}

.bar{
  position: sticky;
  bottom: env(safe-area-inset-bottom);
  z-index: 10;
  margin-top: var(--space-4);
}

.bar-inner{
  border-radius: var(--r-lg);
  border:1px solid var(--border);
  background: color-mix(in srgb, var(--surface) 90%, transparent);
  backdrop-filter: blur(8px);
  padding: var(--space-3);
  display:flex;
  gap:var(--space-3);
  align-items:center;
  justify-content:space-between;
  flex-wrap:wrap;
  box-shadow: var(--shadow-2);
}

.bar-inner--start{
  justify-content:flex-start;
}

.preview{
  display:flex;
  flex-direction:column;
  gap:var(--space-1);
  min-width: 0;
  flex: 1 1 160px;
}

.preview .label{
  color: var(--muted);
  font-size: 12px;
}

.preview .value{
  font-weight:900;
  font-size: 18px;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

.bar-actions{
  display:flex;
  gap:var(--space-2);
  flex-wrap:wrap;
  justify-content:flex-start;
}

.button{
  border:1px solid transparent;
  border-radius: var(--r-md);
  padding: 12px 18px;
  font-weight:800;
  font-size: 14px;
  cursor:pointer;
  min-height:46px;
  min-width:100px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:6px;
  transition: transform var(--dur-1) var(--ease), box-shadow var(--dur-2) var(--ease), background var(--dur-1) ease, border-color var(--dur-1) ease, color var(--dur-1) ease;
}

.button.primary{
  background: linear-gradient(135deg, color-mix(in srgb, var(--accent) 95%, #fff 5%), color-mix(in srgb, var(--accent) 65%, #7a5bff));
  color:#fff;
  box-shadow: var(--shadow-2);
}

.button.secondary{
  background: color-mix(in srgb, var(--accent-3) 16%, transparent);
  color: var(--text);
  border-color: color-mix(in srgb, var(--accent-3) 55%, transparent);
}

.button.ghost{
  background: transparent;
  color: var(--muted);
  border-color: color-mix(in srgb, var(--border) 85%, transparent);
}

.button:disabled{
  opacity:.45;
  cursor:not-allowed;
  box-shadow:none;
  transform:none;
}

.button:active{
  transform: scale(.98);
}

.button:focus-visible{
  outline:none;
  box-shadow: var(--ring);
}

.link-button{
  background:none;
  border:none;
  color: var(--accent);
  font-weight:700;
  font-size: 13px;
  padding: 4px 0;
  cursor:pointer;
}

.link-button:focus-visible{
  outline:none;
  box-shadow: var(--ring);
  border-radius: 999px;
}

.button.small{
  min-height:36px;
  min-width:0;
  padding: 6px 12px;
  border-radius: 999px;
  font-size: 12px;
}

.welcome{
  text-align:center;
  padding: var(--space-5) var(--space-4);
}

.welcome h2{ margin: 0 0 8px; }
.welcome p{ margin:0; color: var(--muted); }

.hero-ornaments{
  display:flex;
  justify-content:center;
  gap:var(--space-2);
  font-size: 24px;
  margin-bottom: var(--space-3);
}

.welcome-actions{
  display:grid;
  gap:var(--space-2);
  justify-items:center;
  margin-top: var(--space-4);
}

.welcome-hint{
  font-size: 12px;
  color: var(--muted);
  font-weight:600;
}

.review-list{
  display:grid;
  gap:var(--space-2);
  margin-top:var(--space-2);
}

.review-item{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:var(--space-2);
  padding:var(--space-3);
  border-radius: var(--r-md);
  border:1px solid var(--border);
  background: var(--surface-2);
  font-size:14px;
  flex-wrap:wrap;
}

.review-item strong{ font-weight:800; }

.check-wrap{
  margin-top: var(--space-4);
}

.check{
  position:relative;
  border-radius: var(--r-lg);
  padding: var(--space-4);
  background: linear-gradient(180deg, var(--surface), var(--surface-2));
  border: 1px solid color-mix(in srgb, var(--accent) 25%, var(--border));
  box-shadow: var(--shadow-2);
  overflow:hidden;
  animation: paperEnter var(--dur-3) var(--ease);
}

.check::before{
  content:"";
  position:absolute;
  inset:0;
  background: repeating-linear-gradient(90deg, color-mix(in srgb, var(--surface) 80%, transparent), color-mix(in srgb, var(--surface) 80%, transparent) 12px, color-mix(in srgb, var(--surface-2) 70%, transparent) 12px, color-mix(in srgb, var(--surface-2) 70%, transparent) 24px);
  opacity:.35;
  pointer-events:none;
}

.check-header{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:var(--space-3);
  font-weight:800;
  color: var(--text);
  margin-bottom: var(--space-3);
  flex-wrap:wrap;
}

.check-label{
  font-size: 12px;
  letter-spacing:.5px;
  text-transform:uppercase;
  color: var(--muted);
}

.check-meta{
  display:flex;
  flex-direction:column;
  align-items:flex-end;
  gap:var(--space-2);
}

.check-body{
  display:grid;
  gap:var(--space-2);
}

.check-field{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:var(--space-3);
  padding:var(--space-3);
  border-radius: var(--r-sm);
  border:1px solid color-mix(in srgb, var(--border) 80%, transparent);
  background: color-mix(in srgb, var(--surface-2) 80%, transparent);
}

.check-field .label{
  color: var(--muted);
  font-size: 12px;
}

.check-field .value{
  font-weight:800;
  color: var(--text);
}

.amount-box{
  border:1px solid color-mix(in srgb, var(--accent) 45%, var(--border));
  padding: 8px 14px;
  border-radius: var(--r-sm);
  min-width: 110px;
  text-align:center;
  font-weight:900;
  color: var(--text);
  background: color-mix(in srgb, var(--accent) 8%, var(--surface));
}

.write-wrap{
  position:relative;
  overflow:hidden;
  min-height: 24px;
}

.write-text{
  display:inline-block;
  font-family: "Caveat", cursive;
  font-weight:600;
  color: var(--text);
  font-size: 20px;
  clip-path: inset(0 0 0 100%);
  animation: writeReveal 1.9s var(--ease) forwards;
}

.pen-dot{
  position:absolute;
  top: 18px;
  right: 0;
  width:6px;
  height:6px;
  border-radius:50%;
  background:var(--text);
  box-shadow: 0 0 8px color-mix(in srgb, var(--text) 30%, transparent);
  animation: penMove 1.9s var(--ease) forwards;
}

@keyframes writeReveal{
  0%{ clip-path: inset(0 0 0 100%); }
  65%{ clip-path: inset(0 0 0 30%); }
  100%{ clip-path: inset(0 0 0 0); }
}

@keyframes penMove{
  0%{ transform: translateX(0); opacity:1; }
  70%{ opacity:1; }
  100%{ transform: translateX(-120%); opacity:0; }
}

@keyframes paperEnter{
  0%{ opacity:0; transform: translateY(20px) rotate(-1deg) scale(.98); }
  100%{ opacity:1; transform: translateY(0) rotate(0deg) scale(1); }
}

.stamp{
  position:absolute;
  top: 18px;
  left: 18px;
  padding: 10px 16px;
  border-radius: var(--r-sm);
  border: 2px solid color-mix(in srgb, var(--accent-2) 70%, transparent);
  color: var(--accent-2);
  font-weight:900;
  transform: rotate(-8deg) scale(0);
  background: color-mix(in srgb, var(--surface) 80%, transparent);
  animation: stampPop var(--dur-3) var(--ease) forwards;
  animation-delay: .7s;
}

@keyframes stampPop{
  0%{ transform: rotate(-8deg) scale(0); opacity:0; }
  60%{ transform: rotate(-8deg) scale(1.1); opacity:1; }
  100%{ transform: rotate(-8deg) scale(1); opacity:1; }
}

.micr{
  margin-top: var(--space-3);
  font-family: "Courier New", monospace;
  font-size: 11px;
  letter-spacing: 1.6px;
  color: color-mix(in srgb, var(--muted) 70%, transparent);
}

.quip{
  margin-top: var(--space-3);
  text-align:center;
  font-weight:600;
  color: var(--muted);
}

.result-actions{
  display:grid;
  gap:var(--space-2);
  margin-top: var(--space-3);
}

.confetti{
  position:absolute;
  inset:0;
  pointer-events:none;
}

.confetti span{
  position:absolute;
  width:5px;
  height:10px;
  border-radius: 4px;
  background: color-mix(in srgb, var(--accent-2) 80%, transparent);
  opacity:.7;
  animation: confettiFall 1.6s var(--ease) forwards;
}

@keyframes confettiFall{
  0%{ opacity:0; transform: translateY(-20px) rotate(0deg); }
  20%{ opacity:1; }
  100%{ opacity:0; transform: translateY(120px) rotate(120deg); }
}

@media (max-width: 420px){
  .app{ padding: var(--space-3) var(--space-3) calc(150px + env(safe-area-inset-bottom)); }
  .button{ min-width: 0; }
  .bar-inner{ align-items:flex-start; }
  .preview .value{ font-size: 16px; }
  .stepper-dot{ width:38px; height:38px; }
  .check-meta{ align-items:stretch; width:100%; }
}

@media (min-width: 520px){
  .grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
}

@media (min-width: 820px){
  .grid{ grid-template-columns: repeat(3, minmax(0, 1fr)); }
}

@media (prefers-reduced-motion: reduce){
  *{ animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition-duration: 0.001ms !important; scroll-behavior:auto !important; }
}

/* Animation timings can be adjusted in the keyframes above (writeReveal, stampPop, slideInForward). */
